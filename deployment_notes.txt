docker build -t few_shot_sam:0.0.2 .

docker run --gpus all -p 80:8080 -it few_shot_sam:0.0.2

gcloud auth configure-docker europe-west3-docker.pkg.dev

docker tag few_shot_sam:0.0.2 europe-west4-docker.pkg.dev/few-shot-sam/fsm-artifact-docker/few_shot_sam_backend:0.0.2

docker push europe-west3-docker.pkg.dev/few-shot-sam/fsm-artifact-docker/few_shot_sam_backend:0.0.2

gcloud services enable container.googleapis.com

gcloud services enable compute.googleapis.com

gcloud container clusters create few-shot-sam-backend-cluster --zone europe-west4 --num-nodes 1 --scopes=gke-default,storage-rw

gcloud container node-pools create few-shot-sam-gpu-pool --cluster few-shot-sam-backend-cluster --image-type=COS_CONTAINERD --accelerator type=nvidia-l4-vws,count=1 --machine-type g2-standard-4 --zone=europe-west4

gcloud compute instances create few-shot-sam-vm --zone=europe-west4-a --machine-type=g2-standard-4 --maintenance-policy=TERMINATE --accelerator="type=nvidia-l4-vws,count=1" --image-family=cos-stable --image-project=cos-cloud --boot-disk-size=200GB --boot-disk-type=pd-standard --boot-disk-device-name=few-shot-sam-vmdisk --metadata-from-file startup-script=start_script.sh
